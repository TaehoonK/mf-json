{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://www.opengis.net/spec/movingfeatures/json/1.0/prism/MF-JSON_Prism.schema.json",
  "type": "object",
  "title": "OGC Moving Feature JSON Prism schema",
  "oneOf":[
      {
        "$id": "#/feature",
        "required": ["type", "temporalGeometry", "geometry", "properties"],
        "properties": {
          "type": {
            "type": "string",
            "enum": ["Feature"]
          },
          "temporalGeometry": {
            "title": "TemporalGeometry Object",
            "oneOf": [
              {
                "$id": "#/feature/properties/temporalGeometry/primitive",
                "type": "object",
                "title": "TemporalPrimitiveGeometry Object",
                "required": ["type", "datetimes", "coordinates"],
                "dependencies": {"orientations": ["base"]}
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": ["MovingPoint", "MovingLineString", "MovingPolygon", "MovingPointCloud"]
                  },
                  "datetimes": {
                    "$id": "#/feature/properties/temporalGeometry/primitive/properties/datetimes",
                    "type": "array",
                    "uniqueItems": true,
                    "minItems": 2,
                    "items": {"type": "string"}
                  },
                  "coordinates": {
                    "oneOf": [
                      {
                        "type": "array",
                        "minItems": 2,
                        "items": {"$ref": "#/feature/properties/geometry/point/coordinates"}
                      },
                      {
                        "type": "array",
                        "minItems": 2,
                        "items": {"$ref": "#/feature/properties/geometry/linestring/coordinates"}
                      },
                      {
                        "type": "array",
                        "minItems": 2,
                        "items": {"$ref": "#/feature/properties/geometry/polygon/coordinates"}
                      }
                    ]
                  },
                  "interpolation": {
                    "oneOf":[
                      {
                        "type": "string",
                        "enum": ["Discrete", "Step", "Linear", "Quadratic", "Cube"],
                        "default": "Linear"
                      },
                      {"type": "string", "format": "uri"}
                    ]
                  },
                  "base": {"type": ["null", "string"], "format": "uri"},
                  "orientations": {
                    "type": ["null", "array"],
                    "items": {
                      "type": "array",
                      "maxItems": 16,
                      "items": {"type": "number"}
                    }
                  },
                  "crs": {"$ref": "#/feature/properties/crs"},
                  "trs": {"$ref": "#/feature/properties/trs"}
                }
              },
              {
                "type": "object",
                "title": "TemporalAggregateGeometry Object",
                "required": ["type", "prisms"],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": ["MultiMovingPoint", "MultiMovingLineString", "MultiMovingPolygon", "MovingGeometryCollection"]
                  },
                  "prisms": {
                    "type": "array",
                    "items": {"$ref": "#/feature/properties/temporalGeometry/primitive"}
                  },
                  "crs": {"$ref": "#/feature/properties/crs"},
                  "trs": {"$ref": "#/feature/properties/trs"}
                }
              }
            ]
          },
          "crs": {
            "$id": "#/feature/properties/crs",
            "title": "Coordinate Reference System",
            "oneOf":[
              {
                "$id": "#/feature/properties/crs/name",
                "type": "object",
                "required": ["type", "properties"],
                "properties": {
                  "type": {"type": "string", "enum": ["name"]},
                  "properties": {
                    "type": "object",
                    "required": ["name"],
                    "properties": {
                      "name": {"type": ["null", "string"], "default": "urn:ogc:def:crs:OGC:1.3:CRS84"}
                    }
                  }
                }
              },
              {
                "$id": "#/feature/properties/crs/link",
                "type": "object",
                "required": ["type", "properties"],
                "properties": {
                  "type": {"type": "string", "enum": ["link"]},
                  "properties": {
                    "type": "object",
                    "required": ["href", "type"],
                    "properties": {
                      "href": {"type": ["null", "string"], "format": "uri"},
                      "type": {"type": ["null", "string"]}
                    }
                  }
                }
              }
            ]
          },
          "trs": {
            "$id": "#/feature/properties/trs",
            "title": "Temporal Coordinate Reference System",
            "oneOf":[
              {
                "$id": "#/feature/properties/trs/name",
                "type": "object",
                "required": ["type", "properties"],
                "properties": {
                  "type": {"type": ["null", "string"], "enum": ["name"]},
                  "properties": {
                    "type": "object",
                    "required": ["name"],
                    "properties": {
                      "name": {"type": "string", "default": "urn:ogc:data:time:iso8601"}
                    }
                  }
                }
              },
              {"$ref": "#/feature/properties/crs/link"}
            ]
          },
          "temporalProperties": {
            "title": "TemporalProperties Objects",
            "type": ["null", "array"],
            "items": [
              {
                "type": "object",
                "required": ["datetimes"],
                "properties": {
                  "datetimes": {"$ref": "#/feature/properties/temporalGeometry/primitive/properties/datetimes"}
                },
                "patternProperties": {
                  "^S_": {
                    "oneOf": [
                      {
                        "type": "object",
                        "required": ["type", "values"],
                        "properties": {
                          "type": {"type": "string", "enum": ["measure"]},
                          "values": {"type": "array", "items": {"type": ["null", "number"]}},
                          "interpolation": {
                            "$id": "#/feature/properties/temporalProperties/ParametricValues/interpolation",
                            "oneOf":[
                              {
                                "type": "string",
                                "enum": ["Discrete", "Step", "Linear", "Regression"],
                                "default": "Linear"
                              },
                              {"type": "string", "format": "uri"}
                            ]
                          },
                          "form": {
                              "oneOf": [
                                {"type": "string", "minLength": 3, "maxLength": 3},
                                {"type": "string", "format": "uri"}
                              ]
                            },
                          "description": {"type": "string"}
                        }
                      },
                      {
                        "type": "object",
                        "required": ["type", "values"],
                        "properties": {
                          "type": {"type": "string", "enum": ["text"]},
                          "values": {"type": "array", "items": {"type": ["null", "string", "boolean"]}},
                          "interpolation": {
                            "$ref": "#/feature/properties/temporalProperties/ParametricValues/interpolation"
                          },
                          "description": {"type": "string"}
                        }
                      },
                      {
                        "type": "object",
                        "required": ["type", "values"],
                        "properties": {
                          "type": {"type": "string", "enum": ["image"]},
                          "values": {"type": "array", "items": {"type": ["null", "string"]}},
                          "interpolation": {
                            "$ref": "#/feature/properties/temporalProperties/ParametricValues/interpolation"
                          },
                          "description": {"type": "string"}
                        }
                      }
                    ]
                  }
                }
              }
            ]
          },
          "bbox": {
            "$id": "#/feature/properties/bbox",
            "title": "BoundingBox Object",
            "type": ["null", "array"],
            "minItems": 4,
            "items": {"type": "number"}
          },
          "time": {
            "$id": "#/feature/properties/time",
            "title": "LifeSpan Object",
            "type": ["null", "array"],
            "minItems": 2,
            "maxItems": 2,
            "uniqueItems": true,
            "items": {"type": "string"}
          },
          "geometry": {
            "oneOf": [
              {"type": "null"},
              {
                "title": "GeoJSON Point",
                "$id": "#/feature/properties/geometry/point",
                "type": "object",
                "required": ["type", "coordinates"],
                "properties": {
                  "type": {"type": "string", "enum": ["Point"]},
                  "coordinates": {
                    "$id": "#/feature/properties/geometry/point/coordinates",
                    "type": "array",
                    "minItems": 2,
                    "items": {"type": "number"}
                  },
                  "bbox": {"$ref": "#/feature/properties/bbox"}
                }
              },
              {
                "title": "GeoJSON LineString",
                "$id": "#/feature/properties/geometry/linestring",
                "type": "object",
                "required": ["type", "coordinates"],
                "properties": {
                  "type": {"type": "string", "enum": ["LineString"]},
                  "coordinates": {
                    "$id": "#/feature/properties/geometry/linestring/coordinates",
                    "type": "array",
                    "minItems": 2,
                    "items": {"$ref": "#/feature/properties/geometry/point/coordinates"}
                  },
                  "bbox": {"$ref": "#/feature/properties/bbox"}
                }
              },
              {
                "title": "GeoJSON Polygon",
                "$id": "#/feature/properties/geometry/polygon",
                "type": "object",
                "required": ["type", "coordinates"],
                "properties": {
                  "type": {"type": "string", "enum": ["Polygon"]},
                  "coordinates": {
                    "$id": "#/feature/properties/geometry/polygon/coordinates",
                    "type": "array",
                    "items": {
                      "type": "array",
                      "minItems": 4,
                      "items": {"$ref": "#/feature/properties/geometry/point/coordinates"}
                    }
                  },
                  "bbox": {"$ref": "#/feature/properties/bbox"}
                }
              },
              {
                "title": "GeoJSON MultiPoint",
                "$id": "#/feature/properties/geometry/multipoint",
                "type": "object",
                "required": ["type", "coordinates"],
                "properties": {
                  "type": {"type": "string", "enum": ["MultiPoint"]},
                  "coordinates": {
                    "$id": "#/feature/properties/geometry/multipoint/coordinates",
                    "type": "array",
                    "items": {"$ref": "#/feature/properties/geometry/point/coordinates"}
                  },
                  "bbox": {"$ref": "#/feature/properties/bbox"}
                }
              },
              {
                "title": "GeoJSON MultiLineString",
                "$id": "#/feature/properties/geometry/multilinestring",
                "type": "object",
                "required": ["type", "coordinates"],
                "properties": {
                  "type": {"type": "string", "enum": ["MultiLineString"]},
                  "coordinates": {
                    "$id": "#/feature/properties/geometry/multilinestring/coordinates",
                    "type": "array",
                    "items": {"$ref": "#/feature/properties/geometry/linestring/coordinates"}
                  },
                  "bbox": {"$ref": "#/feature/properties/bbox"}
                }
              },
              {
                "title": "GeoJSON MultiPolygon",
                "$id": "#/feature/properties/geometry/multipolygon",
                "type": "object",
                "required": ["type", "coordinates"],
                "properties": {
                  "type": {"type": "string", "enum": ["MultiPolygon"]},
                  "coordinates": {
                    "$id": "#/feature/properties/geometry/multipolygon/coordinates",
                    "type": "array",
                    "items": {"$ref": "#/feature/properties/geometry/polygon/coordinates"}
                  },
                  "bbox": {"$ref": "#/feature/properties/bbox"}
                }
              },
              {
                "title": "GeoJSON GeometryCollection",
                "$id": "#/feature/properties/geometry/geometrycollection",
                "type": "object",
                "required": ["type", "geometries"],
                "properties": {
                  "type": {"type": "string", "enum": ["GeometryCollection"]},
                  "geometries": {
                    "type": "array",
                    "items": {
                      "oneOf": [
                        {"$ref": "#/feature/properties/geometry/point"},
                        {"$ref": "#/feature/properties/geometry/linestring"},
                        {"$ref": "#/feature/properties/geometry/polygon"},
                        {"$ref": "#/feature/properties/geometry/multipoint"},
                        {"$ref": "#/feature/properties/geometry/multilinestring"},
                        {"$ref": "#/feature/properties/geometry/multipolygon"}
                      ]
                    }
                  },
                  "bbox": {"$ref": "#/feature/properties/bbox"}
                }
              }
            ]
          },
          "properties": {
            "type": ["null", "object"]
          }
        }
      },
      {
        "$id": "#/featureCollection",
        "required": ["type", "features"],
        "properties": {
          "type": {
            "type": "string",
            "enum": ["FeatureCollection"]
          },
          "features": {
            "type": "array",
            "minItems": 1,
            "items": {"$ref": "#/feature"}
          },
          "crs": {"$ref": "#/feature/properties/crs"},
          "trs": {"$ref": "#/feature/properties/trs"},
          "bbox": {"$ref": "#/feature/properties/bbox"},
          "time": {"$ref": "#/feature/properties/time"},
          "label": {"type": ["null", "string"]}
      }
  ]
}
